<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.se302.controller.MainController"
            prefHeight="800.0" prefWidth="1200.0">

    <!-- Top: Title Bar with Theme Toggle -->
    <top>
        <VBox styleClass="header">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
                <Label text="ðŸ“… Exam Scheduling System" styleClass="title-label" HBox.hgrow="ALWAYS"/>
                <Button fx:id="themeToggleButton" text="ðŸŒ™ Dark Mode" onAction="#onToggleTheme" 
                        style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-border-color: rgba(255,255,255,0.3); -fx-border-width: 1; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 8 16; -fx-font-weight: 700;"/>
            </HBox>
            <Separator/>
        </VBox>
    </top>

    <!-- Left: Sidebar Navigation -->
    <left>
        <VBox fx:id="sidebar" spacing="5" minWidth="180" prefWidth="200" 
              style="-fx-background-color: linear-gradient(to bottom, #2c3e50, #1a252f); -fx-padding: 15;">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            
            <Button fx:id="importBtn" text="ðŸ“ Import Data" onAction="#onShowImport" 
                    maxWidth="Infinity" styleClass="sidebar-button"/>
            
            <Button fx:id="studentsBtn" text="ðŸ‘¤ Students" onAction="#onShowStudents" 
                    maxWidth="Infinity" styleClass="sidebar-button" disable="true"/>
            
            <Button fx:id="coursesBtn" text="ðŸ“š Courses" onAction="#onShowCourses" 
                    maxWidth="Infinity" styleClass="sidebar-button" disable="true"/>
            
            <Button fx:id="classroomsBtn" text="ðŸ›ï¸ Classrooms" onAction="#onShowClassrooms" 
                    maxWidth="Infinity" styleClass="sidebar-button" disable="true"/>
            
            <Button fx:id="scheduleBtn" text="ðŸ“… Schedule" onAction="#onToggleScheduleMenu" 
                    maxWidth="Infinity" styleClass="sidebar-button" disable="true"/>
            
            <!-- Schedule Sub-menu (initially hidden) -->
            <VBox fx:id="scheduleSubMenu" spacing="2" managed="false" visible="false">
                <padding>
                    <Insets left="15"/>
                </padding>
                <Button fx:id="calendarBtn" text="ðŸ“† Calendar View" onAction="#onShowCalendar" 
                        maxWidth="Infinity" styleClass="sidebar-button-sub"/>
                <Button fx:id="studentScheduleBtn" text="ðŸ‘¤ Student Schedule" onAction="#onShowStudentSchedule" 
                        maxWidth="Infinity" styleClass="sidebar-button-sub"/>
                <Button fx:id="courseScheduleBtn" text="ðŸ“š Course Schedule" onAction="#onShowCourseSchedule" 
                        maxWidth="Infinity" styleClass="sidebar-button-sub"/>
                <Button fx:id="classroomScheduleBtn" text="ðŸ›ï¸ Classroom Schedule" onAction="#onShowClassroomSchedule" 
                        maxWidth="Infinity" styleClass="sidebar-button-sub"/>
            </VBox>
            
            <Region VBox.vgrow="ALWAYS"/>
            
            <Label text="Navigation" style="-fx-text-fill: rgba(255,255,255,0.5); -fx-font-size: 10px;"/>
        </VBox>
    </left>

    <!-- Center: Content Area -->
    <center>
        <StackPane fx:id="contentArea">
            <!-- Views are loaded dynamically by controller -->
        </StackPane>
    </center>

    <!-- Bottom: Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" spacing="10">
            <padding>
                <Insets top="8" right="20" bottom="8" left="20"/>
            </padding>
            <Label text="ðŸŸ¢" style="-fx-font-size: 10px;"/>
            <Label fx:id="statusLabel" text="Ready - No data loaded" HBox.hgrow="ALWAYS"/>
            <Label text="ExamFlow v2.0" style="-fx-font-size: 11px; -fx-text-fill: -fx-slate-400; -fx-font-weight: 700;"/>
        </HBox>
    </bottom>
</BorderPane>
